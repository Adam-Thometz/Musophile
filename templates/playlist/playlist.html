{% extends 'base.html' %}
{% block title %}{{playlist.name}}{% endblock %}
{% block content %}
<h1>{{playlist.name}}</h1>
<blockquote>{{playlist.description}}</blockquote>
<ol>
    {% if playlist.recordings %}
    {% for recording in playlist.recordings %}
    <li>{{recording.title}} <small>- {{recording.artist}}</small>
    <form action="/playlists/{{playlist.id}}/remove/{{recording.id}}" method="POST">
        <button>X</button>    
    </form></li>
    {% if recording.spotify_uri %}
    <iframe src="https://open.spotify.com/embed/track/{{recording.spotify_uri}}" width="100%" height="380" frameBorder="0" allowtransparency="true" allow="encrypted-media"></iframe>
    {% endif %}
    {% endfor %}
    {% else %}
    <p>
        This playlist is empty. 
        {% if g.user.id == playlist.user_id %}
        {% endif %}
    </p>
    {% endif %}
</ol>
{% if playlist.tags %}
<p>Tags found in playlist:</p>
<ul>
    {% for tag in playlist.tags %}
    <li><a href="/tags/{{tag.id}}">{{tag.name}}</a></li>
    {% endfor %}
</ul>
{% endif %}
{% if g.user.id == playlist.user_id %}
<a href="/playlists/{{playlist.id}}/edit">Edit playlist</a>
<form action="/playlists/{{playlist.id}}/add" method="POST">
    <button>Add to playlist</button>
</form>
<form action="/playlists/{{playlist.id}}/delete" method="POST">
    <button>Remove playlist</button>
</form>
<a href="/user/{{playlist.user_id}}/library">Library</a>
{% endif %}
{% endblock %}